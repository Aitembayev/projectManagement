{# templates/home.html #}
{% extends "base.html" %}
{% block title %}–ö–∞—Ç–∞–ª–æ–≥{% endblock %}

{% block content %}
<div class="d-flex flex-wrap align-items-end justify-content-between gap-3 mb-3">
  <div>
    <h2 class="km-title mb-1">–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤</h2>
    {% if q %}
      <div class="km-muted">–ü–æ–∏—Å–∫: <strong>{{ q }}</strong></div>
    {% else %}
      <div class="km-muted">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä—ã –∏ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –≤ –∫–æ—Ä–∑–∏–Ω—É</div>
    {% endif %}
  </div>

  <div class="d-flex gap-2">
    <a href="{% url 'shop:home' %}" class="cart-back">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
    <a href="{% url 'shop:cart' %}" class="cart-back">üõí –ö–æ—Ä–∑–∏–Ω–∞</a>
  </div>
</div>

<div class="row g-3">
  {% for product in products %}
    <div class="col-6 col-md-4 col-lg-3">
      <div class="p-card">
        <a class="p-thumb" href="{% url 'shop:product_detail' product.id %}">
          <img src="{{ product.image.url }}" alt="{{ product.title }}">
          <span class="p-like" title="–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ">‚ô°</span>
          <span class="p-badge">HIT</span>
        </a>

        <div class="p-body">
          <div class="p-price">
            <span class="p-price-new">{{ product.price }} ‚Ç∏</span>
            {% if product.old_price %}
              <span class="p-price-old">{{ product.old_price }} ‚Ç∏</span>
            {% endif %}
          </div>

          <div class="p-title">{{ product.title }}</div>

          <div class="p-actions">
            <a class="btn btn-main w-100" href="{% url 'shop:add_to_cart' product.id %}">
              –í –∫–æ—Ä–∑–∏–Ω—É
            </a>
          </div>
        </div>
      </div>
    </div>
  {% empty %}
    <div class="col-12">
      <div class="empty-cart">
        <div class="empty-title">–¢–æ–≤–∞—Ä–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</div>
        <div class="km-muted">–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É.</div>
      </div>
    </div>
  {% endfor %}
</div>
{% endblock %}
